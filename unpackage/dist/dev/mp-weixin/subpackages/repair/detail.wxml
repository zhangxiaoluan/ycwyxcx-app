<block wx:if="{{repairInfo}}"><view class="repair-detail-page data-v-5e04b0da"><view class="header data-v-5e04b0da"><text class="title data-v-5e04b0da">报修详情</text></view><view class="content data-v-5e04b0da"><view class="info-section data-v-5e04b0da"><view class="section-title data-v-5e04b0da"><u-icon vue-id="4eb7cbd3-1" name="info-circle" size="20" color="#3b5598" class="data-v-5e04b0da" bind:__l="__l"></u-icon><text class="data-v-5e04b0da">基本信息</text></view><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">报修单号</text><text class="value data-v-5e04b0da">{{repairInfo.requestNo}}</text></view><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">报修分类</text><text class="value data-v-5e04b0da">{{repairInfo.categoryName}}</text></view><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">紧急程度</text><view class="{{['urgency-badge','data-v-5e04b0da','urgency-'+repairInfo.urgentLevel]}}">{{''+repairInfo.urgentLevelDesc+''}}</view></view><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">当前状态</text><view class="{{['status-badge','data-v-5e04b0da','status-'+repairInfo.status]}}">{{''+repairInfo.statusDesc+''}}</view></view><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">报修位置</text><text class="value data-v-5e04b0da">{{repairInfo.location}}</text></view><block wx:if="{{repairInfo.contactTime}}"><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">方便联系时间</text><text class="value data-v-5e04b0da">{{repairInfo.contactTime}}</text></view></block><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">申请时间</text><text class="value data-v-5e04b0da">{{$root.m0}}</text></view></view><view class="section data-v-5e04b0da"><view class="section-title data-v-5e04b0da"><u-icon vue-id="4eb7cbd3-2" name="file-text" size="20" color="#3b5598" class="data-v-5e04b0da" bind:__l="__l"></u-icon><text class="data-v-5e04b0da">问题描述</text></view><view class="problem-content data-v-5e04b0da"><text class="problem-title data-v-5e04b0da">{{repairInfo.title}}</text><text class="problem-desc data-v-5e04b0da">{{repairInfo.description}}</text></view></view><block wx:if="{{$root.g0}}"><view class="section data-v-5e04b0da"><view class="section-title data-v-5e04b0da"><u-icon vue-id="4eb7cbd3-3" name="image" size="20" color="#3b5598" class="data-v-5e04b0da" bind:__l="__l"></u-icon><text class="data-v-5e04b0da">现场照片</text></view><view class="image-grid data-v-5e04b0da"><block wx:for="{{repairInfo.imageList}}" wx:for-item="img" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['previewImage',['$0',index],['repairInfo.imageList']]]]]}}" class="image-item data-v-5e04b0da" bindtap="__e"><image src="{{img}}" mode="aspectFill" class="data-v-5e04b0da"></image></view></block></view></view></block><block wx:if="{{repairInfo.handlerName}}"><view class="section data-v-5e04b0da"><view class="section-title data-v-5e04b0da"><u-icon vue-id="4eb7cbd3-4" name="user" size="20" color="#3b5598" class="data-v-5e04b0da" bind:__l="__l"></u-icon><text class="data-v-5e04b0da">处理信息</text></view><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">处理人员</text><text class="value data-v-5e04b0da">{{repairInfo.handlerName}}</text></view><block wx:if="{{repairInfo.handleTime}}"><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">受理时间</text><text class="value data-v-5e04b0da">{{$root.m1}}</text></view></block><block wx:if="{{repairInfo.startTime}}"><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">开始处理时间</text><text class="value data-v-5e04b0da">{{$root.m2}}</text></view></block><block wx:if="{{repairInfo.completeTime}}"><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">完成时间</text><text class="value data-v-5e04b0da">{{$root.m3}}</text></view></block><block wx:if="{{repairInfo.remark}}"><view class="info-item data-v-5e04b0da"><text class="label data-v-5e04b0da">处理备注</text><text class="value data-v-5e04b0da">{{repairInfo.remark}}</text></view></block></view></block><block wx:if="{{repairInfo.rating}}"><view class="section data-v-5e04b0da"><view class="section-title data-v-5e04b0da"><u-icon vue-id="4eb7cbd3-5" name="star" size="20" color="#3b5598" class="data-v-5e04b0da" bind:__l="__l"></u-icon><text class="data-v-5e04b0da">评价信息</text></view><view class="rating-info data-v-5e04b0da"><view class="rating-stars data-v-5e04b0da"><block wx:for="{{5}}" wx:for-item="i" wx:for-index="__i0__" wx:key="*this"><u-icon vue-id="{{'4eb7cbd3-6-'+__i0__}}" name="{{i<=repairInfo.rating?'star-fill':'star'}}" size="32" color="{{i<=repairInfo.rating?'#ffc107':'#ddd'}}" class="data-v-5e04b0da" bind:__l="__l"></u-icon></block></view><text class="rating-text data-v-5e04b0da">{{$root.m4}}</text></view><block wx:if="{{repairInfo.feedback}}"><view class="feedback-content data-v-5e04b0da"><text class="feedback-label data-v-5e04b0da">评价内容：</text><text class="feedback-text data-v-5e04b0da">{{repairInfo.feedback}}</text></view></block><block wx:if="{{repairInfo.feedbackTime}}"><view class="feedback-time data-v-5e04b0da"><text class="data-v-5e04b0da">{{"评价时间："+$root.m5}}</text></view></block></view></block><block wx:if="{{$root.g1}}"><view class="section data-v-5e04b0da"><view class="section-title data-v-5e04b0da"><u-icon vue-id="4eb7cbd3-7" name="clock" size="20" color="#3b5598" class="data-v-5e04b0da" bind:__l="__l"></u-icon><text class="data-v-5e04b0da">处理进度</text></view><view class="progress-list data-v-5e04b0da"><block wx:for="{{$root.l1}}" wx:for-item="progress" wx:for-index="index" wx:key="id"><view class="progress-item data-v-5e04b0da"><view class="{{['progress-dot','data-v-5e04b0da',(progress.$orig.status===4)?'active':'']}}"></view><view class="progress-content data-v-5e04b0da"><view class="progress-header data-v-5e04b0da"><text class="progress-status data-v-5e04b0da">{{progress.$orig.statusDesc}}</text><text class="progress-time data-v-5e04b0da">{{progress.m6}}</text></view><block wx:if="{{progress.$orig.operatorName}}"><view class="progress-operator data-v-5e04b0da"><text class="data-v-5e04b0da">{{"操作人："+progress.$orig.operatorName}}</text><text class="operator-type data-v-5e04b0da">{{progress.$orig.operatorTypeDesc}}</text></view></block><block wx:if="{{progress.$orig.description}}"><view class="progress-desc data-v-5e04b0da">{{''+progress.$orig.description+''}}</view></block><block wx:if="{{progress.g2}}"><view class="progress-images data-v-5e04b0da"><block wx:for="{{progress.l0}}" wx:for-item="img" wx:for-index="imgIndex" wx:key="imgIndex"><image src="{{img}}" mode="aspectFill" data-event-opts="{{[['tap',[['previewImage',['$0',imgIndex],[[['repairInfo.progressList','id',progress.$orig.id,'imageList']]]]]]]}}" bindtap="__e" class="data-v-5e04b0da"></image></block><block wx:if="{{progress.g3>3}}"><view class="more-images data-v-5e04b0da"><text class="data-v-5e04b0da">{{"+"+(progress.g4-3)}}</text></view></block></view></block></view></view></block></view></view></block><block wx:if="{{showActions}}"><view class="actions-section data-v-5e04b0da"><block wx:if="{{repairInfo.status===4&&repairInfo.canRate}}"><button data-event-opts="{{[['tap',[['rateRepair',['$event']]]]]}}" class="action-btn primary data-v-5e04b0da" bindtap="__e"><u-icon vue-id="4eb7cbd3-8" name="star" size="16" color="#fff" class="data-v-5e04b0da" bind:__l="__l"></u-icon><text class="data-v-5e04b0da">评价服务</text></button></block><block wx:if="{{repairInfo.status!==1}}"><button data-event-opts="{{[['tap',[['viewProgress',['$event']]]]]}}" class="action-btn secondary data-v-5e04b0da" bindtap="__e"><u-icon vue-id="4eb7cbd3-9" name="clock" size="16" color="#3b5598" class="data-v-5e04b0da" bind:__l="__l"></u-icon><text class="data-v-5e04b0da">查看进度</text></button></block></view></block></view></view></block><block wx:else><block wx:if="{{loading}}"><view class="loading-state data-v-5e04b0da"><u-loading-icon vue-id="4eb7cbd3-10" mode="circle" color="#3b5598" size="40" class="data-v-5e04b0da" bind:__l="__l"></u-loading-icon><text class="data-v-5e04b0da">加载中...</text></view></block><block wx:else><view class="error-state data-v-5e04b0da"><u-icon vue-id="4eb7cbd3-11" name="alert-circle" size="64" color="#ddd" class="data-v-5e04b0da" bind:__l="__l"></u-icon><text class="error-text data-v-5e04b0da">加载失败</text><button data-event-opts="{{[['tap',[['loadRepairDetail',['$event']]]]]}}" class="retry-btn data-v-5e04b0da" bindtap="__e">重试</button></view></block></block>