<view class="repair-apply-page data-v-1fe7d6c8"><view class="content data-v-1fe7d6c8"><view class="form-section data-v-1fe7d6c8"><view class="form-item required data-v-1fe7d6c8"><text class="form-label data-v-1fe7d6c8">报修分类</text><view data-event-opts="{{[['tap',[['showCategoryPicker',['$event']]]]]}}" class="category-selector data-v-1fe7d6c8" bindtap="__e"><text class="{{['picker-text','data-v-1fe7d6c8',(!formData.categoryName)?'placeholder':'']}}">{{''+(formData.categoryName||'请选择报修分类')+''}}</text><u-icon vue-id="1176ffea-1" name="arrow-right" size="16" color="#999" class="data-v-1fe7d6c8" bind:__l="__l"></u-icon></view></view><view class="form-item required data-v-1fe7d6c8"><text class="form-label data-v-1fe7d6c8">报修标题</text><input class="form-input data-v-1fe7d6c8" placeholder="请简要描述报修问题" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','title','$event',[]],['formData']]]]]}}" value="{{formData.title}}" bindinput="__e"/><text class="input-count data-v-1fe7d6c8">{{$root.g0+"/50"}}</text></view><view class="form-item required data-v-1fe7d6c8"><text class="form-label data-v-1fe7d6c8">详细描述</text><textarea class="form-textarea data-v-1fe7d6c8" placeholder="请详细描述报修问题的情况、故障现象等" maxlength="500" data-event-opts="{{[['input',[['__set_model',['$0','description','$event',[]],['formData']]]]]}}" value="{{formData.description}}" bindinput="__e"></textarea><text class="input-count data-v-1fe7d6c8">{{$root.g1+"/500"}}</text></view><view class="form-item required data-v-1fe7d6c8"><text class="form-label data-v-1fe7d6c8">报修位置</text><input class="form-input data-v-1fe7d6c8" placeholder="请输入具体的报修位置" maxlength="100" data-event-opts="{{[['input',[['__set_model',['$0','location','$event',[]],['formData']]]]]}}" value="{{formData.location}}" bindinput="__e"/></view><view class="form-item required data-v-1fe7d6c8"><text class="form-label data-v-1fe7d6c8">紧急程度</text><view class="urgency-selector data-v-1fe7d6c8"><block wx:for="{{urgencyLevels}}" wx:for-item="item" wx:for-index="__i0__" wx:key="value"><view data-event-opts="{{[['tap',[['selectUrgency',['$0'],[[['urgencyLevels','value',item.value]]]]]]]}}" class="{{['urgency-item','data-v-1fe7d6c8',(formData.urgentLevel===item.value)?'active':'']}}" bindtap="__e"><text class="urgency-label data-v-1fe7d6c8">{{item.label}}</text><text class="urgency-desc data-v-1fe7d6c8">{{item.description}}</text></view></block></view></view><view class="form-item data-v-1fe7d6c8"><text class="form-label data-v-1fe7d6c8">联系电话时间</text><picker mode="selector" range="{{contactTimes}}" value="{{contactTimeIndex}}" data-event-opts="{{[['change',[['onContactTimeChange',['$event']]]]]}}" bindchange="__e" class="data-v-1fe7d6c8"><view class="picker data-v-1fe7d6c8">{{''+(formData.contactTime||'请选择方便联系的时间')+''}}</view></picker></view><view class="form-item data-v-1fe7d6c8"><text class="form-label data-v-1fe7d6c8">现场照片</text><view class="image-upload data-v-1fe7d6c8"><view class="image-list data-v-1fe7d6c8"><block wx:for="{{formData.imageList}}" wx:for-item="image" wx:for-index="index" wx:key="index"><view class="image-item data-v-1fe7d6c8"><image src="{{image}}" mode="aspectFill" data-event-opts="{{[['tap',[['previewImage',[index]]]]]}}" bindtap="__e" class="data-v-1fe7d6c8"></image><button data-event-opts="{{[['tap',[['deleteImage',[index]]]]]}}" class="delete-image data-v-1fe7d6c8" bindtap="__e"><u-icon vue-id="{{'1176ffea-2-'+index}}" name="close" size="14" color="#fff" class="data-v-1fe7d6c8" bind:__l="__l"></u-icon></button></view></block><block wx:if="{{$root.g2<6}}"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="upload-btn data-v-1fe7d6c8" bindtap="__e"><u-icon vue-id="1176ffea-3" name="camera" size="32" color="#999" class="data-v-1fe7d6c8" bind:__l="__l"></u-icon><text class="upload-text data-v-1fe7d6c8">添加照片</text><text class="upload-tips data-v-1fe7d6c8">最多6张</text></view></block></view></view></view></view><view class="submit-section data-v-1fe7d6c8"><button data-event-opts="{{[['tap',[['submitRepair',['$event']]]]]}}" class="submit-btn data-v-1fe7d6c8" bindtap="__e"><block wx:if="{{canSubmit}}"><u-icon vue-id="1176ffea-4" name="checkmark" size="16" color="#fff" class="data-v-1fe7d6c8" bind:__l="__l"></u-icon></block><text class="data-v-1fe7d6c8">提交报修申请</text></button></view></view><u-popup vue-id="1176ffea-5" show="{{showCategoryModal}}" mode="bottom" border-radius="20" class="data-v-1fe7d6c8" bind:__l="__l" vue-slots="{{['default']}}"><view class="category-modal data-v-1fe7d6c8"><view class="modal-header data-v-1fe7d6c8"><text class="modal-title data-v-1fe7d6c8">选择报修分类</text><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="close-btn data-v-1fe7d6c8" bindtap="__e"><u-icon vue-id="{{('1176ffea-6')+','+('1176ffea-5')}}" name="close" size="20" color="#999" class="data-v-1fe7d6c8" bind:__l="__l"></u-icon></view></view><view class="category-list data-v-1fe7d6c8"><block wx:for="{{categories}}" wx:for-item="item" wx:for-index="__i1__" wx:key="id"><view data-event-opts="{{[['tap',[['selectCategory',['$0'],[[['categories','id',item.id]]]]]]]}}" class="{{['category-item','data-v-1fe7d6c8',(selectedCategory&&selectedCategory.id===item.id)?'active':'']}}" bindtap="__e"><view class="category-info data-v-1fe7d6c8"><text class="category-name data-v-1fe7d6c8">{{item.name}}</text><block wx:if="{{item.description}}"><text class="category-desc data-v-1fe7d6c8">{{item.description}}</text></block></view><block wx:if="{{selectedCategory&&selectedCategory.id===item.id}}"><u-icon vue-id="{{('1176ffea-7-'+__i1__)+','+('1176ffea-5')}}" name="checkmark" size="20" color="#3b5598" class="data-v-1fe7d6c8" bind:__l="__l"></u-icon></block></view></block></view><view class="modal-footer data-v-1fe7d6c8"><button data-event-opts="{{[['tap',[['confirmCategory',['$event']]]]]}}" class="confirm-btn data-v-1fe7d6c8" bindtap="__e">确定</button></view></view></u-popup></view>