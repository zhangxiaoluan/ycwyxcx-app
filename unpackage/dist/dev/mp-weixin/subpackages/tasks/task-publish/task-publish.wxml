<view class="task-publish-page"><view class="content"><view class="form-section"><view class="form-item required"><text class="form-label">任务类型</text><view class="type-selector"><block wx:for="{{taskTypes}}" wx:for-item="item" wx:for-index="__i0__" wx:key="value"><view data-event-opts="{{[['tap',[['selectType',['$0'],[[['taskTypes','value',item.value,'value']]]]]]]}}" class="{{['type-item',(formData.type===item.value)?'active':'']}}" bindtap="__e"><u-icon vue-id="{{'2a3e4df8-1-'+__i0__}}" name="{{item.icon}}" size="24" color="{{formData.type===item.value?'#fff':item.color}}" bind:__l="__l"></u-icon><text>{{item.label}}</text></view></block></view></view><view class="form-item required"><text class="form-label">任务标题</text><input class="form-input" placeholder="请简要描述您的任务需求" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','title','$event',[]],['formData']]]]]}}" value="{{formData.title}}" bindinput="__e"/><text class="input-count">{{$root.g0+"/50"}}</text></view><view class="form-item required"><text class="form-label">任务描述</text><textarea class="form-textarea" placeholder="请详细描述您的任务需求，包括具体要求、注意事项等" maxlength="500" data-event-opts="{{[['input',[['__set_model',['$0','description','$event',[]],['formData']]]]]}}" value="{{formData.description}}" bindinput="__e"></textarea><text class="input-count">{{$root.g1+"/500"}}</text></view><view class="form-item"><text class="form-label">任务要求</text><view class="requirements-list"><block wx:for="{{formData.requirements}}" wx:for-item="req" wx:for-index="index" wx:key="index"><view class="requirement-item"><input class="requirement-input" placeholder="输入具体要求" data-event-opts="{{[['input',[['__set_model',['$0',index,'$event',[]],['formData.requirements']]]]]}}" value="{{formData.requirements[index]}}" bindinput="__e"/><block wx:if="{{$root.g2>1}}"><button data-event-opts="{{[['tap',[['removeRequirement',[index]]]]]}}" class="remove-btn" bindtap="__e"><u-icon vue-id="{{'2a3e4df8-2-'+index}}" name="trash" size="16" color="#f5222d" bind:__l="__l"></u-icon></button></block></view></block><button data-event-opts="{{[['tap',[['addRequirement',['$event']]]]]}}" class="add-btn" bindtap="__e"><u-icon vue-id="2a3e4df8-3" name="plus" size="16" color="#3b5598" bind:__l="__l"></u-icon><text>添加要求</text></button></view></view><view class="form-item"><text class="form-label">任务图片</text><view class="image-upload"><view class="image-list"><block wx:for="{{formData.images}}" wx:for-item="image" wx:for-index="index" wx:key="index"><view class="image-item"><image src="{{image}}" mode="aspectFill" data-event-opts="{{[['tap',[['previewImage',[index]]]]]}}" bindtap="__e"></image><button data-event-opts="{{[['tap',[['deleteImage',[index]]]]]}}" class="delete-image" bindtap="__e"><u-icon vue-id="{{'2a3e4df8-4-'+index}}" name="close" size="14" color="#fff" bind:__l="__l"></u-icon></button></view></block><block wx:if="{{$root.g3<6}}"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="upload-btn" bindtap="__e"><u-icon vue-id="2a3e4df8-5" name="camera" size="32" color="#999" bind:__l="__l"></u-icon><text class="upload-text">添加图片</text><text class="upload-tips">最多6张</text></view></block></view></view></view><view class="form-item required"><text class="form-label">截止时间</text><picker mode="date" value="{{formData.deadline}}" start="{{minDate}}" data-event-opts="{{[['change',[['onDeadlineChange',['$event']]]]]}}" bindchange="__e"><view class="picker">{{''+(formData.deadline||'请选择截止时间')+''}}</view></picker></view><view class="form-item required"><text class="form-label">任务奖励</text><view class="reward-selector"><block wx:for="{{rewardTypes}}" wx:for-item="item" wx:for-index="__i1__" wx:key="value"><view data-event-opts="{{[['tap',[['selectRewardType',['$0'],[[['rewardTypes','value',item.value,'value']]]]]]]}}" class="{{['reward-type',(formData.rewardType===item.value)?'active':'']}}" bindtap="__e"><text>{{item.label}}</text></view></block></view><block wx:if="{{formData.rewardType}}"><view class="reward-input-wrapper"><input class="reward-input" placeholder="{{'请输入'+$root.m0}}" type="digit" data-event-opts="{{[['input',[['__set_model',['$0','reward','$event',[]],['formData']]]]]}}" value="{{formData.reward}}" bindinput="__e"/><text class="reward-unit">{{$root.m1}}</text></view></block></view><view class="form-item"><text class="form-label">奖励说明</text><textarea class="form-textarea" placeholder="可选：补充说明奖励发放条件等" maxlength="200" data-event-opts="{{[['input',[['__set_model',['$0','rewardDesc','$event',[]],['formData']]]]]}}" value="{{formData.rewardDesc}}" bindinput="__e"></textarea></view><view class="form-item"><text class="form-label">联系方式</text><radio-group data-event-opts="{{[['change',[['onContactChange',['$event']]]]]}}" bindchange="__e"><label class="contact-option"><radio value="app" checked="{{formData.contactMethod==='app'}}"></radio><text>通过APP内消息联系</text></label><label class="contact-option"><radio value="phone" checked="{{formData.contactMethod==='phone'}}"></radio><text>通过电话联系</text></label><label class="contact-option"><radio value="both" checked="{{formData.contactMethod==='both'}}"></radio><text>APP消息和电话都可以</text></label></radio-group></view></view><view class="notice-section"><view class="notice-title"><u-icon vue-id="2a3e4df8-6" name="info-circle" size="20" color="#3b5598" bind:__l="__l"></u-icon><text>发布须知</text></view><view class="notice-list"><text class="notice-item">• 请确保任务描述真实准确，避免误导</text><text class="notice-item">• 任务内容需符合法律法规，禁止发布违法信息</text><text class="notice-item">• 请合理设置任务奖励，过低奖励可能影响接单率</text><text class="notice-item">• 发布后将扣除相应的诚信保证金</text><text class="notice-item">• 任务完成后请及时确认并发放奖励</text></view></view><view class="agreement"><checkbox-group data-event-opts="{{[['change',[['onAgreementChange',['$event']]]]]}}" bindchange="__e"><checkbox value="agreed" checked="{{agreedToTerms}}"></checkbox><text class="agreement-text"> 我已阅读并同意《任务发布服务协议》 </text></checkbox-group></view><button class="submit-btn" disabled="{{!canSubmit}}" data-event-opts="{{[['tap',[['submitTask',['$event']]]]]}}" bindtap="__e"> 发布任务 </button></view></view>