<view class="task-detail-page data-v-45fceda2"><block wx:if="{{taskDetail}}"><view class="content data-v-45fceda2"><view class="{{['status-card','data-v-45fceda2','task-status-'+taskDetail.taskStatus]}}"><view class="status-header data-v-45fceda2"><view class="{{['task-type','data-v-45fceda2','task-type-'+taskDetail.taskType]}}"><text class="data-v-45fceda2">{{taskDetail.taskTypeName}}</text></view><view class="task-status-text data-v-45fceda2"><text class="data-v-45fceda2">{{taskDetail.taskStatusName}}</text></view></view><text class="task-title data-v-45fceda2">{{taskDetail.title}}</text></view><view class="info-section data-v-45fceda2"><view class="section-title data-v-45fceda2">任务描述</view><text class="task-description data-v-45fceda2">{{taskDetail.content}}</text></view><block wx:if="{{$root.g0}}"><view class="info-section data-v-45fceda2"><view class="section-title data-v-45fceda2">任务图片</view><view class="image-grid data-v-45fceda2"><block wx:for="{{taskDetail.taskImages}}" wx:for-item="img" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['previewImage',['$0',index],['taskDetail.taskImages']]]]]}}" class="image-item data-v-45fceda2" bindtap="__e"><image src="{{img}}" mode="aspectFill" class="data-v-45fceda2"></image></view></block></view></view></block><block wx:if="{{taskDetail.publisherName}}"><view class="info-section data-v-45fceda2"><view class="section-title data-v-45fceda2">发布者信息</view><view class="publisher-info data-v-45fceda2"><view class="publisher-avatar data-v-45fceda2"><u-icon vue-id="79a147a4-1" name="user" size="40" color="#3b5598" class="data-v-45fceda2" bind:__l="__l"></u-icon></view><view class="publisher-details data-v-45fceda2"><text class="publisher-name data-v-45fceda2">{{taskDetail.publisherName}}</text><block wx:if="{{taskDetail.communityName}}"><text class="publisher-community data-v-45fceda2">{{''+taskDetail.communityName+''}}</text></block></view></view></view></block><view class="info-section data-v-45fceda2"><view class="section-title data-v-45fceda2">时间信息</view><view class="info-grid data-v-45fceda2"><view class="info-item data-v-45fceda2"><text class="info-label data-v-45fceda2">发布时间</text><text class="info-value data-v-45fceda2">{{$root.m0}}</text></view><block wx:if="{{taskDetail.deadlineTime}}"><view class="info-item data-v-45fceda2"><text class="info-label data-v-45fceda2">截止时间</text><text class="info-value deadline data-v-45fceda2">{{$root.m1}}</text></view></block><block wx:if="{{taskDetail.takeTime}}"><view class="info-item data-v-45fceda2"><text class="info-label data-v-45fceda2">领取时间</text><text class="info-value data-v-45fceda2">{{$root.m2}}</text></view></block><block wx:if="{{taskDetail.completeTime}}"><view class="info-item data-v-45fceda2"><text class="info-label data-v-45fceda2">完成时间</text><text class="info-value data-v-45fceda2">{{$root.m3}}</text></view></block></view></view><block wx:if="{{taskDetail.contactPhone||taskDetail.contactAddress}}"><view class="info-section data-v-45fceda2"><view class="section-title data-v-45fceda2">联系信息</view><view class="contact-info data-v-45fceda2"><block wx:if="{{taskDetail.contactPhone}}"><view class="contact-item data-v-45fceda2"><u-icon vue-id="79a147a4-2" name="phone" size="16" color="#3b5598" class="data-v-45fceda2" bind:__l="__l"></u-icon><text class="data-v-45fceda2">{{taskDetail.contactPhone}}</text></view></block><block wx:if="{{taskDetail.contactAddress}}"><view class="contact-item data-v-45fceda2"><u-icon vue-id="79a147a4-3" name="map-pin" size="16" color="#3b5598" class="data-v-45fceda2" bind:__l="__l"></u-icon><text class="data-v-45fceda2">{{taskDetail.contactAddress}}</text></view></block></view></view></block><block wx:if="{{taskDetail.takerName}}"><view class="info-section data-v-45fceda2"><view class="section-title data-v-45fceda2">领取者信息</view><view class="taker-info data-v-45fceda2"><view class="taker-avatar data-v-45fceda2"><u-icon vue-id="79a147a4-4" name="user" size="40" color="#3b5598" class="data-v-45fceda2" bind:__l="__l"></u-icon></view><view class="taker-details data-v-45fceda2"><text class="taker-name data-v-45fceda2">{{taskDetail.takerName}}</text><text class="take-time data-v-45fceda2">{{"领取时间："+$root.m4}}</text></view></view></view></block><block wx:if="{{taskDetail.remark}}"><view class="info-section data-v-45fceda2"><view class="section-title data-v-45fceda2">备注</view><text class="remark-text data-v-45fceda2">{{taskDetail.remark}}</text></view></block><block wx:if="{{taskDetail.rewardPoints>0}}"><view class="info-section data-v-45fceda2"><view class="section-title data-v-45fceda2">任务奖励</view><view class="reward-info data-v-45fceda2"><text class="reward-value data-v-45fceda2">{{taskDetail.rewardPoints+" 积分"}}</text><text class="reward-desc data-v-45fceda2">完成此任务可获得积分奖励</text></view></view></block></view></block><block wx:else><block wx:if="{{loading}}"><view class="loading-state data-v-45fceda2"><u-loading-icon vue-id="79a147a4-5" mode="circle" color="#3b5598" size="40" class="data-v-45fceda2" bind:__l="__l"></u-loading-icon><text class="data-v-45fceda2">加载中...</text></view></block><block wx:else><view class="error-state data-v-45fceda2"><u-icon vue-id="79a147a4-6" name="order" size="64" color="#ddd" class="data-v-45fceda2" bind:__l="__l"></u-icon><text class="error-text data-v-45fceda2">加载失败</text><button data-event-opts="{{[['tap',[['loadTaskDetail',['$event']]]]]}}" class="retry-btn data-v-45fceda2" bindtap="__e">重试</button></view></block></block><block wx:if="{{taskDetail&&showActions}}"><view class="action-section data-v-45fceda2"><block wx:if="{{taskDetail.canTake&&!taskDetail.hasApplied}}"><button data-event-opts="{{[['tap',[['takeTask',['$event']]]]]}}" class="action-btn primary data-v-45fceda2" bindtap="__e"><u-icon vue-id="79a147a4-7" name="checkmark" size="16" color="#fff" class="data-v-45fceda2" bind:__l="__l"></u-icon><text class="data-v-45fceda2">领取任务</text></button></block><block wx:if="{{taskDetail.taskStatus===2&&isTaskTaker}}"><button data-event-opts="{{[['tap',[['completeTask',['$event']]]]]}}" class="action-btn primary data-v-45fceda2" bindtap="__e"><u-icon vue-id="79a147a4-8" name="checkmark-circle" size="16" color="#fff" class="data-v-45fceda2" bind:__l="__l"></u-icon><text class="data-v-45fceda2">完成任务</text></button></block><block wx:if="{{taskDetail.taskStatus===1&&isTaskPublisher}}"><button data-event-opts="{{[['tap',[['cancelTask',['$event']]]]]}}" class="action-btn secondary data-v-45fceda2" bindtap="__e"><u-icon vue-id="79a147a4-9" name="close" size="16" color="#f5222d" class="data-v-45fceda2" bind:__l="__l"></u-icon><text class="data-v-45fceda2">取消任务</text></button></block></view></block></view>