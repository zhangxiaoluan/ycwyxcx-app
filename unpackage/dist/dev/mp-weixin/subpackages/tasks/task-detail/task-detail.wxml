<view class="task-detail-page"><block wx:if="{{taskDetail}}"><view class="content"><view class="{{['status-card',taskDetail.status]}}"><view class="status-header"><view class="{{['task-type',taskDetail.type]}}"><u-icon vue-id="79a147a4-1" name="{{$root.m0}}" size="20" color="#fff" bind:__l="__l"></u-icon><text>{{$root.m1}}</text></view><view class="task-status"><u-icon vue-id="79a147a4-2" name="{{$root.m2}}" size="16" color="{{$root.m3}}" bind:__l="__l"></u-icon><text style="{{'color:'+($root.m4)+';'}}">{{$root.m5}}</text></view></view><text class="task-title">{{taskDetail.title}}</text></view><view class="info-section"><view class="section-title">任务描述</view><text class="task-description">{{taskDetail.description}}</text></view><block wx:if="{{taskDetail.requirements}}"><view class="info-section"><view class="section-title">任务要求</view><view class="requirements-list"><block wx:for="{{taskDetail.requirements}}" wx:for-item="req" wx:for-index="index" wx:key="index"><text class="requirement-item">{{'• '+req+''}}</text></block></view></view></block><view class="info-section"><view class="section-title">时间信息</view><view class="info-grid"><view class="info-item"><text class="info-label">发布时间</text><text class="info-value">{{taskDetail.createTime}}</text></view><block wx:if="{{taskDetail.deadline}}"><view class="info-item"><text class="info-label">截止时间</text><text class="info-value deadline">{{taskDetail.deadline}}</text></view></block><block wx:if="{{taskDetail.completeTime}}"><view class="info-item"><text class="info-label">完成时间</text><text class="info-value">{{taskDetail.completeTime}}</text></view></block></view></view><view class="reward-section"><view class="section-title">任务奖励</view><view class="reward-info"><view class="reward-amount"><text class="reward-value">{{taskDetail.reward}}</text><text class="reward-type">{{$root.m6}}</text></view><block wx:if="{{taskDetail.rewardDesc}}"><view class="reward-desc">{{''+taskDetail.rewardDesc+''}}</view></block></view></view><view class="publisher-section"><view class="section-title">发布者</view><view class="publisher-info"><image class="publisher-avatar" src="{{taskDetail.publisher.avatar}}" mode="aspectFill"></image><view class="publisher-details"><text class="publisher-name">{{taskDetail.publisher.name}}</text><text class="publisher-rating">{{"评分："+taskDetail.publisher.rating+"/5.0"}}</text></view><button data-event-opts="{{[['tap',[['contactPublisher',['$event']]]]]}}" class="contact-btn" bindtap="__e"><u-icon vue-id="79a147a4-3" name="message" size="16" color="#3b5598" bind:__l="__l"></u-icon><text>联系</text></button></view></view><block wx:if="{{taskDetail.assignee}}"><view class="assignee-section"><view class="section-title">接单者</view><view class="assignee-info"><image class="assignee-avatar" src="{{taskDetail.assignee.avatar}}" mode="aspectFill"></image><view class="assignee-details"><text class="assignee-name">{{taskDetail.assignee.name}}</text><text class="assignee-rating">{{"评分："+taskDetail.assignee.rating+"/5.0"}}</text></view><button data-event-opts="{{[['tap',[['contactAssignee',['$event']]]]]}}" class="contact-btn" bindtap="__e"><u-icon vue-id="79a147a4-4" name="message" size="16" color="#3b5598" bind:__l="__l"></u-icon><text>联系</text></button></view></view></block><block wx:if="{{taskDetail.status==='pending'&&taskDetail.progress}}"><view class="progress-section"><view class="section-title">任务进度</view><view class="progress-info"><view class="progress-bar"><view class="progress-fill" style="{{'width:'+(taskDetail.progress+'%')+';'}}"></view></view><text class="progress-text">{{taskDetail.progress+"%"}}</text></view><block wx:if="{{taskDetail.updates}}"><view class="progress-updates"><block wx:for="{{taskDetail.updates}}" wx:for-item="update" wx:for-index="index" wx:key="index"><view class="update-item"><text class="update-time">{{update.time}}</text><text class="update-content">{{update.content}}</text></view></block></view></block></view></block><block wx:if="{{$root.g0}}"><view class="attachments-section"><view class="section-title">图片附件</view><view class="images-grid"><block wx:for="{{taskDetail.images}}" wx:for-item="image" wx:for-index="index" wx:key="index"><image class="task-image" src="{{image}}" mode="aspectFill" data-event-opts="{{[['tap',[['previewImage',[index]]]]]}}" bindtap="__e"></image></block></view></view></block></view></block><block wx:if="{{taskDetail}}"><view class="action-bar"><block wx:if="{{canCancel}}"><button data-event-opts="{{[['tap',[['cancelTask',['$event']]]]]}}" class="action-btn cancel" bindtap="__e">取消任务</button></block><block wx:if="{{canAccept}}"><button data-event-opts="{{[['tap',[['acceptTask',['$event']]]]]}}" class="action-btn accept" bindtap="__e">接单</button></block><block wx:if="{{canComplete}}"><button data-event-opts="{{[['tap',[['completeTask',['$event']]]]]}}" class="action-btn complete" bindtap="__e">确认完成</button></block><block wx:if="{{canContact}}"><button data-event-opts="{{[['tap',[['contactUser',['$event']]]]]}}" class="action-btn contact" bindtap="__e">联系对方</button></block></view></block></view>