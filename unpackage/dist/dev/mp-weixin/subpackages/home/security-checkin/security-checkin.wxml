<view class="security-checkin-page"><view class="form-container"><view class="form-card"><view class="card-title"><u-icon vue-id="71d8a737-1" name="map" size="20" color="#3b5598" bind:__l="__l"></u-icon><text>位置信息</text></view><view class="form-item"><text class="label">位置名称</text><input class="input" placeholder="请输入位置名称" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','locationName','$event',[]],['formData']]]]]}}" value="{{formData.locationName}}" bindinput="__e"/></view><view class="form-item"><text class="label">详细地址</text><input class="input" placeholder="请输入详细地址" maxlength="100" data-event-opts="{{[['input',[['__set_model',['$0','address','$event',[]],['formData']]]]]}}" value="{{formData.address}}" bindinput="__e"/></view><view class="form-item"><map style="width:100%;height:300px;" zIndex="{{true}}" enable-poi="{{true}}" show-location="{{true}}" enable-overlooking="{{true}}" enable-rotate="{{true}}" show-compass="{{true}}" enable-3D="{{true}}" latitude="{{formData.latitude}}" longitude="{{formData.longitude}}"></map></view><view data-event-opts="{{[['tap',[['getCurrentLocation',['$event']]]]]}}" class="location-btn" bindtap="__e"><text>获取当前位置</text></view></view><view class="form-card"><view class="card-title"><u-icon vue-id="71d8a737-2" name="grid" size="20" color="#3b5598" bind:__l="__l"></u-icon><text>打卡类型</text></view><view class="radio-group"><block wx:for="{{checkinTypes}}" wx:for-item="type" wx:for-index="__i0__" wx:key="value"><view data-event-opts="{{[['tap',[['selectCheckinType',['$0'],[[['checkinTypes','value',type.value,'value']]]]]]]}}" class="radio-item" bindtap="__e"><view class="{{['radio-icon',(formData.checkinType===type.value)?'active':'']}}"><block wx:if="{{formData.checkinType===type.value}}"><view class="radio-dot"></view></block></view><text class="radio-label">{{type.label}}</text></view></block></view></view><view class="form-card"><view class="card-title"><u-icon vue-id="71d8a737-3" name="camera" size="20" color="#3b5598" bind:__l="__l"></u-icon><text>现场照片</text><text class="optional">（选填）</text></view><view class="image-upload"><view class="image-list"><block wx:for="{{formData.imageUrls}}" wx:for-item="image" wx:for-index="index" wx:key="index"><view class="image-item"><image class="uploaded-image" src="{{image}}" mode="aspectFill"></image><view data-event-opts="{{[['tap',[['deleteImage',[index]]]]]}}" class="delete-btn" bindtap="__e"><u-icon vue-id="{{'71d8a737-4-'+index}}" name="close" size="14" color="#fff" bind:__l="__l"></u-icon></view></view></block><block wx:if="{{$root.g0<3}}"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="upload-btn" bindtap="__e"><u-icon vue-id="71d8a737-5" name="plus" size="24" color="#999" bind:__l="__l"></u-icon><text class="upload-text">添加照片</text></view></block></view><text class="upload-tip">最多可上传3张照片</text></view></view><view class="form-card"><view class="card-title"><u-icon vue-id="71d8a737-6" name="edit-pen" size="20" color="#3b5598" bind:__l="__l"></u-icon><text>备注信息</text><text class="optional">（选填）</text></view><textarea class="textarea" placeholder="请输入备注信息" maxlength="200" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['formData']]]]]}}" value="{{formData.remark}}" bindinput="__e"></textarea><view class="char-count">{{$root.g1+"/200"}}</view></view><view class="submit-section"><button data-event-opts="{{[['tap',[['submitCheckin',['$event']]]]]}}" class="submit-btn" bindtap="__e"><block wx:if="{{!loading}}"><u-icon vue-id="71d8a737-7" name="checkmark" size="18" color="#fff" bind:__l="__l"></u-icon></block><block wx:if="{{loading}}"><u-loading-icon vue-id="71d8a737-8" size="18" color="#fff" bind:__l="__l"></u-loading-icon></block><text>{{loading?'提交中...':'确认打卡'}}</text></button></view></view></view>