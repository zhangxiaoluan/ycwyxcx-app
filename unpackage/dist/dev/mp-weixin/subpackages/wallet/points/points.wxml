<view class="points-page"><view class="content"><view class="points-card"><view class="points-info"><text class="points-label">当前积分</text><text class="points-amount">{{currentPoints}}</text></view><view class="points-actions"><button data-event-opts="{{[['tap',[['goToEarnPoints',['$event']]]]]}}" class="action-btn earn" bindtap="__e">赚积分</button><button data-event-opts="{{[['tap',[['goToPointsMall',['$event']]]]]}}" class="action-btn exchange" bindtap="__e">兑换</button></view></view><view class="section"><text class="section-title">积分记录</text><view class="tabs"><view data-event-opts="{{[['tap',[['switchTab',['all']]]]]}}" class="{{['tab-item',(currentTab==='all')?'active':'']}}" bindtap="__e"><text>全部</text></view><view data-event-opts="{{[['tap',[['switchTab',['earn']]]]]}}" class="{{['tab-item',(currentTab==='earn')?'active':'']}}" bindtap="__e"><text>获得</text></view><view data-event-opts="{{[['tap',[['switchTab',['spend']]]]]}}" class="{{['tab-item',(currentTab==='spend')?'active':'']}}" bindtap="__e"><text>消费</text></view></view><view class="points-list"><block wx:for="{{filteredPoints}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="points-item"><view class="points-info"><text class="points-title">{{item.title}}</text><text class="points-time">{{item.time}}</text></view><text class="{{['points-amount',item.type]}}">{{''+(item.type==='earn'?'+':'-')+item.amount+''}}</text></view></block></view></view><view class="section"><text class="section-title">积分任务</text><view class="tasks-grid"><block wx:for="{{tasks}}" wx:for-item="task" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['doTask',['$0'],[[['tasks','id',task.id]]]]]]]}}" class="task-card" bindtap="__e"><view class="task-icon"><u-icon vue-id="{{'26ac367d-1-'+__i0__}}" name="{{task.icon}}" size="30" color="{{task.color}}" bind:__l="__l"></u-icon></view><text class="task-title">{{task.title}}</text><text class="task-points">{{"+"+task.points+"积分"}}</text><text class="{{['task-status',(task.completed)?'completed':'']}}">{{''+(task.completed?'已完成':'去完成')+''}}</text></view></block></view></view></view></view>