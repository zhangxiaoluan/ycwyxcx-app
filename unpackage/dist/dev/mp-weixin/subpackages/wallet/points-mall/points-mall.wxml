<view class="points-mall-page"><view class="header"><text class="title">ç§¯åˆ†å•†åŸ</text><view class="points-info"><text class="points-label">æˆ‘çš„ç§¯åˆ†</text><text class="points-amount">{{userPoints}}</text></view></view><view class="content"><view class="category-tabs"><scroll-view class="tab-scroll" scroll-x="{{true}}"><view data-event-opts="{{[['tap',[['switchCategory',[0]]]]]}}" class="{{['tab-item',currentCategoryId===0?'active':'']}}" bindtap="__e"><text>å…¨éƒ¨</text></view><block wx:for="{{categories}}" wx:for-item="category" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['switchCategory',['$0'],[[['categories','id',category.id,'id']]]]]]]}}" class="{{['tab-item',currentCategoryId===category.id?'active':'']}}" bindtap="__e"><text>{{category.name}}</text></view></block></scroll-view></view><block wx:if="{{$root.g0>0}}"><view class="goods-grid"><block wx:for="{{products}}" wx:for-item="item" wx:for-index="__i1__" wx:key="id"><view data-event-opts="{{[['tap',[['showGoodsDetail',['$0'],[[['products','id',item.id]]]]]]]}}" class="goods-item" bindtap="__e"><view class="goods-image"><image src="{{item.image||'/static/images/default-product.png'}}" mode="aspectFill"></image><block wx:if="{{!item.canExchange}}"><view class="goods-tag">å·²å…‘å®Œ</view></block><block wx:else><block wx:if="{{item.soldCount>10}}"><view class="goods-tag hot">çƒ­é—¨</view></block></block></view><view class="goods-info"><text class="goods-name">{{item.name}}</text><text class="goods-desc">{{item.description}}</text><view class="goods-points"><text class="points-value">{{item.points}}</text><text class="points-label">ç§¯åˆ†</text></view><block wx:if="{{item.stock>0}}"><view class="goods-stock"><text>{{"åº“å­˜"+item.stock+"ä»¶"}}</text></view></block></view></view></block></view></block><block wx:else><block wx:if="{{!loading}}"><view class="empty-state"><view class="empty-icon">ğŸ›ï¸</view><text class="empty-text">æš‚æ— å•†å“</text><text class="empty-desc">è¯¥åˆ†ç±»ä¸‹æš‚æ— å¯å…‘æ¢å•†å“</text></view></block></block><block wx:if="{{loading}}"><view class="loading-state"><u-loading-icon vue-id="38d6a65f-1" mode="circle" size="40" bind:__l="__l"></u-loading-icon><text class="loading-text">åŠ è½½ä¸­...</text></view></block></view><u-modal vue-id="38d6a65f-2" title="{{selectedGoods?selectedGoods.name:''}}" confirm-text="ç«‹å³å…‘æ¢" value="{{showDetailModal}}" data-event-opts="{{[['^confirm',[['exchangeGoods']]],['^cancel',[['closeDetail']]],['^input',[['__set_model',['','showDetailModal','$event',[]]]]]]}}" bind:confirm="__e" bind:cancel="__e" bind:input="__e" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{selectedGoods}}"><view class="goods-detail"><image class="detail-image" src="{{selectedGoods.image}}" mode="aspectFill"></image><view class="detail-info"><text class="detail-desc">{{selectedGoods.description}}</text><view class="detail-points"><text class="points-value">{{selectedGoods.points}}</text><text class="points-label">ç§¯åˆ†</text></view><block wx:if="{{selectedGoods.stock!==undefined}}"><view class="detail-stock"><text>{{"åº“å­˜ï¼š"+selectedGoods.stock+"ä»¶"}}</text></view></block><view class="detail-rules"><text class="rules-title">å…‘æ¢è§„åˆ™ï¼š</text><text class="rules-content">{{selectedGoods.rules}}</text></view></view></view></block></u-modal></view>