<view class="message-page"><view class="tabs"><view data-event-opts="{{[['tap',[['switchTab',['all']]]]]}}" class="{{['tab-item',(currentTab==='all')?'active':'']}}" bindtap="__e"><text>全部</text><block wx:if="{{unreadCount.all>0}}"><view class="badge">{{unreadCount.all}}</view></block></view><view data-event-opts="{{[['tap',[['switchTab',['notice']]]]]}}" class="{{['tab-item',(currentTab==='notice')?'active':'']}}" bindtap="__e"><text>公告</text><block wx:if="{{unreadCount.notice>0}}"><view class="badge">{{unreadCount.notice}}</view></block></view><view data-event-opts="{{[['tap',[['switchTab',['system']]]]]}}" class="{{['tab-item',(currentTab==='system')?'active':'']}}" bindtap="__e"><text>系统</text><block wx:if="{{unreadCount.system>0}}"><view class="badge">{{unreadCount.system}}</view></block></view></view><view class="message-list"><block wx:for="{{filteredMessages}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['readMessage',['$0'],[[['filteredMessages','',index]]]]]]]}}" class="message-item" bindtap="__e"><view class="message-content"><view class="message-header"><text class="message-title">{{item.title}}</text><text class="message-time">{{item.time}}</text></view><text class="message-desc">{{item.content}}</text></view><block wx:if="{{!item.read}}"><view class="unread-dot"></view></block></view></block></view></view>