<view class="community-page data-v-0156f9f9"><view class="page-header data-v-0156f9f9"><text class="page-title data-v-0156f9f9">社区动态</text><text class="page-subtitle data-v-0156f9f9">分享社区生活，共建和谐邻里</text><view data-event-opts="{{[['tap',[['goToPublish',['$event']]]]]}}" class="publish-btn data-v-0156f9f9" bindtap="__e"><u-icon vue-id="2988c62d-1" name="plus" size="16" color="#fff" class="data-v-0156f9f9" bind:__l="__l"></u-icon><text class="publish-text data-v-0156f9f9">发布</text></view></view><view class="search-section data-v-0156f9f9"><view class="search-box data-v-0156f9f9"><u-icon vue-id="2988c62d-2" name="search" size="20" color="#999" class="data-v-0156f9f9" bind:__l="__l"></u-icon><input class="search-input data-v-0156f9f9" placeholder="搜索社区动态" data-event-opts="{{[['input',[['__set_model',['','searchKeyword','$event',[]]],['onSearchInput',['$event']]]]]}}" value="{{searchKeyword}}" bindinput="__e"/></view></view><view class="post-list data-v-0156f9f9"><block wx:for="{{$root.l1}}" wx:for-item="post" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['goToPostDetail',['$0'],[[['posts','id',post.$orig.id]]]]]]]}}" class="post-item data-v-0156f9f9" bindtap="__e"><view class="user-info data-v-0156f9f9"><image class="user-avatar data-v-0156f9f9" src="{{post.$orig.userAvatar||'/static/image/default-avatar.png'}}"></image><view class="user-details data-v-0156f9f9"><text class="user-name data-v-0156f9f9">{{post.$orig.userName}}</text><text class="post-time data-v-0156f9f9">{{post.m0}}</text></view><view class="{{post.m1}}">{{''+post.m2+''}}</view></view><view class="post-content data-v-0156f9f9"><block wx:if="{{post.$orig.title}}"><text class="post-title data-v-0156f9f9">{{post.$orig.title}}</text></block><text class="post-text data-v-0156f9f9">{{post.$orig.content}}</text></view><block wx:if="{{post.g0}}"><view class="media-section data-v-0156f9f9"><block wx:if="{{post.$orig.mediaList[0].type===0}}"><view class="image-grid data-v-0156f9f9"><block wx:for="{{post.l0}}" wx:for-item="media" wx:for-index="index" wx:key="id"><view data-event-opts="{{[['tap',[['previewImage',['$0',index],[[['posts','id',post.$orig.id,'mediaList']]]]]]]}}" class="{{media.m3}}" catchtap="__e"><image class="media-image data-v-0156f9f9" src="{{media.$orig.thumbnail||media.$orig.url}}" mode="aspectFill"></image></view></block><block wx:if="{{post.g1>9}}"><view data-event-opts="{{[['tap',[['previewImage',['$0',9],[[['posts','id',post.$orig.id,'mediaList']]]]]]]}}" class="more-images data-v-0156f9f9" catchtap="__e"><text class="data-v-0156f9f9">{{"+"+(post.g2-9)}}</text></view></block></view></block><block wx:else><block wx:if="{{post.$orig.mediaList[0].type===1}}"><view class="video-item data-v-0156f9f9"><image class="video-thumbnail data-v-0156f9f9" src="{{post.$orig.mediaList[0].thumbnail}}" mode="aspectFill"></image><view class="video-play-btn data-v-0156f9f9"><u-icon vue-id="{{'2988c62d-3-'+__i0__}}" name="play-circle-fill" size="60" color="rgba(255,255,255,0.8)" class="data-v-0156f9f9" bind:__l="__l"></u-icon></view></view></block></block></view></block><view class="interaction-section data-v-0156f9f9"><view data-event-opts="{{[['tap',[['toggleLike',['$0'],[[['posts','id',post.$orig.id]]]]]]]}}" class="interaction-item data-v-0156f9f9" catchtap="__e"><u-icon vue-id="{{'2988c62d-4-'+__i0__}}" name="{{post.$orig.isLiked?'heart-fill':'heart'}}" color="{{post.$orig.isLiked?'#ff4d4f':'#999'}}" size="20" class="data-v-0156f9f9" bind:__l="__l"></u-icon><text class="{{['interaction-text','data-v-0156f9f9',(post.$orig.isLiked)?'liked':'']}}">{{post.$orig.likes||0}}</text></view><view data-event-opts="{{[['tap',[['goToPostDetail',['$0','comment'],[[['posts','id',post.$orig.id]]]]]]]}}" class="interaction-item data-v-0156f9f9" catchtap="__e"><u-icon vue-id="{{'2988c62d-5-'+__i0__}}" name="message-circle" size="20" color="#999" class="data-v-0156f9f9" bind:__l="__l"></u-icon><text class="interaction-text data-v-0156f9f9">{{post.$orig.commentsCount||0}}</text></view><view data-event-opts="{{[['tap',[['sharePost',['$0'],[[['posts','id',post.$orig.id]]]]]]]}}" class="interaction-item data-v-0156f9f9" catchtap="__e"><u-icon vue-id="{{'2988c62d-6-'+__i0__}}" name="share-2" size="20" color="#999" class="data-v-0156f9f9" bind:__l="__l"></u-icon><text class="interaction-text data-v-0156f9f9">分享</text></view><block wx:if="{{post.$orig.canEdit||post.$orig.canDelete}}"><view data-event-opts="{{[['tap',[['showActionSheet',['$0'],[[['posts','id',post.$orig.id]]]]]]]}}" class="post-actions data-v-0156f9f9" catchtap="__e"><u-icon vue-id="{{'2988c62d-7-'+__i0__}}" name="more-horizontal" size="20" color="#999" class="data-v-0156f9f9" bind:__l="__l"></u-icon></view></block></view></view></block></view><block wx:if="{{$root.g3}}"><view class="empty-state data-v-0156f9f9"><u-icon vue-id="2988c62d-8" name="message-circle" size="60" color="#ccc" class="data-v-0156f9f9" bind:__l="__l"></u-icon><text class="empty-text data-v-0156f9f9">暂无动态</text><text class="empty-desc data-v-0156f9f9">快来发布第一条动态吧</text><button data-event-opts="{{[['tap',[['goToPublish',['$event']]]]]}}" class="empty-publish-btn data-v-0156f9f9" bindtap="__e">发布动态</button></view></block><block wx:if="{{loading}}"><view class="loading-section data-v-0156f9f9"><u-loading-icon vue-id="2988c62d-9" mode="flower" size="40" class="data-v-0156f9f9" bind:__l="__l"></u-loading-icon><text class="loading-text data-v-0156f9f9">加载中...</text></view></block><block wx:if="{{hasMore&&!loading}}"><view class="load-more data-v-0156f9f9"><text data-event-opts="{{[['tap',[['loadMore',['$event']]]]]}}" class="load-more-text data-v-0156f9f9" bindtap="__e">加载更多</text></view></block><block wx:if="{{$root.g4}}"><view class="no-more data-v-0156f9f9"><text class="no-more-text data-v-0156f9f9">已经到底了</text></view></block></view>