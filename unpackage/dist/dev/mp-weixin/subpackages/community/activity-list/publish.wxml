<view class="publish-page data-v-5c834014"><view class="nav-bar data-v-5c834014"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="nav-left data-v-5c834014" bindtap="__e"><u-icon vue-id="660e1fd0-1" name="arrow-left" size="24" color="#333" class="data-v-5c834014" bind:__l="__l"></u-icon></view><text class="nav-title data-v-5c834014">发布动态</text><view data-event-opts="{{[['tap',[['submitPost',['$event']]]]]}}" class="{{['nav-right','data-v-5c834014',(!canPublish)?'disabled':'']}}" bindtap="__e"><text class="publish-btn data-v-5c834014">发布</text></view></view><view class="content-container data-v-5c834014"><view class="title-section data-v-5c834014"><input class="title-input data-v-5c834014" placeholder="填写标题，让你的动态更吸引人（选填）" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','title','$event',[]],['postForm']]]]]}}" value="{{postForm.title}}" bindinput="__e"/><text class="title-count data-v-5c834014">{{$root.g0+"/50"}}</text></view><view class="content-section data-v-5c834014"><textarea class="content-input data-v-5c834014" placeholder="分享你的想法、经历或见闻..." maxlength="1000" auto-height="{{true}}" data-event-opts="{{[['input',[['__set_model',['$0','content','$event',[]],['postForm']]]]]}}" value="{{postForm.content}}" bindinput="__e"></textarea><text class="content-count data-v-5c834014">{{$root.g1+"/1000"}}</text></view><view class="media-section data-v-5c834014"><view class="media-grid data-v-5c834014"><block wx:for="{{selectedMedia}}" wx:for-item="media" wx:for-index="index" wx:key="index"><view class="media-item data-v-5c834014"><view class="media-wrapper data-v-5c834014"><block wx:if="{{media.type==='image'}}"><image class="media-preview data-v-5c834014" src="{{media.url}}" mode="aspectFill" data-event-opts="{{[['tap',[['previewMedia',[index]]]]]}}" bindtap="__e"></image></block><block wx:else><block wx:if="{{media.type==='video'}}"><view class="video-preview data-v-5c834014"><image class="video-thumbnail data-v-5c834014" src="{{media.thumbnail}}" mode="aspectFill"></image><view class="video-play-icon data-v-5c834014"><u-icon vue-id="{{'660e1fd0-2-'+index}}" name="play-circle-fill" size="40" color="rgba(255,255,255,0.8)" class="data-v-5c834014" bind:__l="__l"></u-icon></view></view></block></block><view data-event-opts="{{[['tap',[['removeMedia',[index]]]]]}}" class="media-delete data-v-5c834014" bindtap="__e"><u-icon vue-id="{{'660e1fd0-3-'+index}}" name="close" size="16" color="#fff" class="data-v-5c834014" bind:__l="__l"></u-icon></view><block wx:if="{{media.uploading}}"><view class="media-status data-v-5c834014"><u-loading-icon vue-id="{{'660e1fd0-4-'+index}}" mode="circle" size="20" color="#3b5598" class="data-v-5c834014" bind:__l="__l"></u-loading-icon></view></block></view></view></block><block wx:if="{{$root.g2<9}}"><view data-event-opts="{{[['tap',[['showMediaOptions',['$event']]]]]}}" class="media-item add-media data-v-5c834014" bindtap="__e"><view class="add-media-icon data-v-5c834014"><u-icon vue-id="660e1fd0-5" name="camera" size="40" color="#ccc" class="data-v-5c834014" bind:__l="__l"></u-icon></view><text class="add-media-text data-v-5c834014">添加图片/视频</text></view></block></view><text class="media-tip data-v-5c834014">最多上传9张图片或1个视频</text></view><view class="topic-section data-v-5c834014"><text class="section-title data-v-5c834014">添加话题</text><view class="topic-input-wrapper data-v-5c834014"><input class="topic-input data-v-5c834014" placeholder="#输入话题标签" data-event-opts="{{[['confirm',[['addTopic',['$event']]]],['input',[['__set_model',['','topicInput','$event',[]]]]]]}}" value="{{topicInput}}" bindconfirm="__e" bindinput="__e"/><view data-event-opts="{{[['tap',[['addTopic',['$event']]]]]}}" class="add-topic-btn data-v-5c834014" bindtap="__e">添加</view></view><block wx:if="{{$root.g3>0}}"><view class="topic-list data-v-5c834014"><block wx:for="{{postForm.topics}}" wx:for-item="topic" wx:for-index="index" wx:key="index"><view class="topic-tag data-v-5c834014"><text class="topic-text data-v-5c834014">{{"#"+topic}}</text><view data-event-opts="{{[['tap',[['removeTopic',[index]]]]]}}" class="topic-remove data-v-5c834014" bindtap="__e"><u-icon vue-id="{{'660e1fd0-6-'+index}}" name="close" size="12" color="#666" class="data-v-5c834014" bind:__l="__l"></u-icon></view></view></block></view></block></view><view class="settings-section data-v-5c834014"><view class="setting-item data-v-5c834014"><text class="setting-label data-v-5c834014">谁可以看</text><view data-event-opts="{{[['tap',[['showPrivacyOptions',['$event']]]]]}}" class="setting-value data-v-5c834014" bindtap="__e"><text class="setting-text data-v-5c834014">{{$root.m0}}</text><u-icon vue-id="660e1fd0-7" name="arrow-right" size="16" color="#999" class="data-v-5c834014" bind:__l="__l"></u-icon></view></view><view class="setting-item data-v-5c834014"><text class="setting-label data-v-5c834014">允许评论</text><switch checked="{{postForm.allowComment}}" color="#3b5598" data-event-opts="{{[['change',[['onCommentChange',['$event']]]]]}}" bindchange="__e" class="data-v-5c834014"></switch></view></view></view><u-popup bind:input="__e" vue-id="660e1fd0-8" mode="bottom" round="{{10}}" safe-area-inset-bottom="{{true}}" value="{{showMediaPicker}}" data-event-opts="{{[['^input',[['__set_model',['','showMediaPicker','$event',[]]]]]]}}" class="data-v-5c834014" bind:__l="__l" vue-slots="{{['default']}}"><view class="media-picker data-v-5c834014"><view class="picker-header data-v-5c834014"><text class="picker-title data-v-5c834014">选择媒体</text><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="picker-close data-v-5c834014" bindtap="__e"><u-icon vue-id="{{('660e1fd0-9')+','+('660e1fd0-8')}}" name="close" size="20" color="#999" class="data-v-5c834014" bind:__l="__l"></u-icon></view></view><view class="picker-options data-v-5c834014"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="picker-option data-v-5c834014" bindtap="__e"><u-icon vue-id="{{('660e1fd0-10')+','+('660e1fd0-8')}}" name="photo" size="24" color="#3b5598" class="data-v-5c834014" bind:__l="__l"></u-icon><text class="option-text data-v-5c834014">从相册选择</text></view><view data-event-opts="{{[['tap',[['takePhoto',['$event']]]]]}}" class="picker-option data-v-5c834014" bindtap="__e"><u-icon vue-id="{{('660e1fd0-11')+','+('660e1fd0-8')}}" name="camera" size="24" color="#3b5598" class="data-v-5c834014" bind:__l="__l"></u-icon><text class="option-text data-v-5c834014">拍照</text></view><block wx:if="{{!hasVideo}}"><view data-event-opts="{{[['tap',[['chooseVideo',['$event']]]]]}}" class="picker-option data-v-5c834014" bindtap="__e"><u-icon vue-id="{{('660e1fd0-12')+','+('660e1fd0-8')}}" name="play-circle" size="24" color="#3b5598" class="data-v-5c834014" bind:__l="__l"></u-icon><text class="option-text data-v-5c834014">选择视频</text></view></block><block wx:if="{{!hasVideo}}"><view data-event-opts="{{[['tap',[['recordVideo',['$event']]]]]}}" class="picker-option data-v-5c834014" bindtap="__e"><u-icon vue-id="{{('660e1fd0-13')+','+('660e1fd0-8')}}" name="videocam" size="24" color="#3b5598" class="data-v-5c834014" bind:__l="__l"></u-icon><text class="option-text data-v-5c834014">录制视频</text></view></block></view></view></u-popup><u-popup bind:input="__e" vue-id="660e1fd0-14" mode="bottom" round="{{10}}" safe-area-inset-bottom="{{true}}" value="{{showPrivacyPicker}}" data-event-opts="{{[['^input',[['__set_model',['','showPrivacyPicker','$event',[]]]]]]}}" class="data-v-5c834014" bind:__l="__l" vue-slots="{{['default']}}"><view class="privacy-picker data-v-5c834014"><view class="picker-header data-v-5c834014"><text class="picker-title data-v-5c834014">谁可以看</text><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="picker-close data-v-5c834014" bindtap="__e"><u-icon vue-id="{{('660e1fd0-15')+','+('660e1fd0-14')}}" name="close" size="20" color="#999" class="data-v-5c834014" bind:__l="__l"></u-icon></view></view><view class="privacy-options data-v-5c834014"><block wx:for="{{privacyOptions}}" wx:for-item="option" wx:for-index="__i0__" wx:key="value"><view data-event-opts="{{[['tap',[['selectPrivacy',['$0'],[[['privacyOptions','value',option.value,'value']]]]]]]}}" class="privacy-option data-v-5c834014" bindtap="__e"><text class="option-text data-v-5c834014">{{option.label}}</text><block wx:if="{{postForm.privacy===option.value}}"><u-icon vue-id="{{('660e1fd0-16-'+__i0__)+','+('660e1fd0-14')}}" name="checkmark" size="20" color="#3b5598" class="data-v-5c834014" bind:__l="__l"></u-icon></block></view></block></view></view></u-popup></view>