<view class="feedback-page"><view class="content"><view class="form-section"><view class="form-item required"><text class="form-label">反馈类型</text><view class="type-selector"><block wx:for="{{feedbackTypes}}" wx:for-item="item" wx:for-index="__i0__" wx:key="value"><view data-event-opts="{{[['tap',[['selectType',['$0'],[[['feedbackTypes','value',item.value,'value']]]]]]]}}" class="{{['type-item',(formData.type===item.value)?'active':'']}}" bindtap="__e"><u-icon vue-id="{{'49de1e7d-1-'+__i0__}}" name="{{item.icon}}" size="24" color="{{formData.type===item.value?'#fff':item.color}}" bind:__l="__l"></u-icon><text>{{item.label}}</text></view></block></view></view><view class="form-item required"><text class="form-label">反馈标题</text><input class="form-input" placeholder="请简要描述您的问题或建议" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','title','$event',[]],['formData']]]]]}}" value="{{formData.title}}" bindinput="__e"/><text class="input-count">{{$root.g0+"/50"}}</text></view><view class="form-item required"><text class="form-label">详细描述</text><textarea class="form-textarea" placeholder="请详细描述您的问题或建议，我们会认真处理每一条反馈" maxlength="500" data-event-opts="{{[['input',[['__set_model',['$0','content','$event',[]],['formData']]]]]}}" value="{{formData.content}}" bindinput="__e"></textarea><text class="input-count">{{$root.g1+"/500"}}</text></view><view class="form-item"><text class="form-label">相关图片</text><view class="image-upload"><view class="image-list"><block wx:for="{{formData.images}}" wx:for-item="image" wx:for-index="index" wx:key="index"><view class="image-item"><image src="{{image}}" mode="aspectFill" data-event-opts="{{[['tap',[['previewImage',[index]]]]]}}" bindtap="__e"></image><button data-event-opts="{{[['tap',[['deleteImage',[index]]]]]}}" class="delete-image" bindtap="__e"><u-icon vue-id="{{'49de1e7d-2-'+index}}" name="close" size="14" color="#fff" bind:__l="__l"></u-icon></button></view></block><block wx:if="{{$root.g2<4}}"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="upload-btn" bindtap="__e"><u-icon vue-id="49de1e7d-3" name="camera" size="32" color="#999" bind:__l="__l"></u-icon><text class="upload-text">添加图片</text><text class="upload-tips">最多4张</text></view></block></view></view></view><view class="form-item"><text class="form-label">联系方式</text><view class="contact-info"><input class="form-input" placeholder="手机号或邮箱（可选，便于我们回复）" data-event-opts="{{[['input',[['__set_model',['$0','contact','$event',[]],['formData']]]]]}}" value="{{formData.contact}}" bindinput="__e"/></view></view><view class="form-item"><text class="form-label">紧急程度</text><view class="urgency-selector"><block wx:for="{{urgencyLevels}}" wx:for-item="item" wx:for-index="__i1__" wx:key="value"><view data-event-opts="{{[['tap',[['selectUrgency',['$0'],[[['urgencyLevels','value',item.value,'value']]]]]]]}}" class="{{['urgency-item',(formData.urgency===item.value)?'active':'']}}" bindtap="__e"><view class="{{['urgency-dot',item.color]}}"></view><text>{{item.label}}</text></view></block></view></view></view><block wx:if="{{$root.g3>0}}"><view class="history-section"><view class="section-title"><text>历史反馈</text><text class="history-count">{{"("+$root.g4+"条)"}}</text></view><view class="history-list"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i2__" wx:key="id"><view data-event-opts="{{[['tap',[['viewFeedbackDetail',['$0'],[[['feedbackHistory','id',item.$orig.id]]]]]]]}}" class="history-item" bindtap="__e"><view class="history-header"><view class="{{['feedback-type',item.$orig.type]}}"><u-icon vue-id="{{'49de1e7d-4-'+__i2__}}" name="{{item.m0}}" size="16" color="#fff" bind:__l="__l"></u-icon><text>{{item.m1}}</text></view><view class="{{['feedback-status',item.$orig.status]}}">{{''+item.m2+''}}</view></view><text class="feedback-title">{{item.$orig.title}}</text><text class="feedback-summary">{{item.g5+"..."}}</text><view class="history-footer"><text class="submit-time">{{item.$orig.submitTime}}</text><view class="{{['urgency-indicator',item.$orig.urgency]}}">{{''+item.m3+''}}</view></view></view></block></view></view></block><view class="tips-section"><view class="tips-title"><u-icon vue-id="49de1e7d-5" name="info-circle" size="20" color="#3b5598" bind:__l="__l"></u-icon><text>反馈须知</text></view><view class="tips-list"><text class="tip-item">• 请客观、真实地描述问题，避免情绪化表达</text><text class="tip-item">• 如有相关图片，请一并提供，有助于我们更好地理解问题</text><text class="tip-item">• 我们会在1-3个工作日内处理您的反馈</text><text class="tip-item">• 紧急问题请拨打物业热线：400-123-4567</text><text class="tip-item">• 恶意举报、虚假信息将被严肃处理</text></view></view><button data-event-opts="{{[['tap',[['submitFeedback',['$event']]]]]}}" class="submit-btn" bindtap="__e"> 提交反馈 </button></view></view>