<view class="house-binding-page"><view class="content"><view class="binding-steps"><view class="{{['step-item',(currentStep>=1)?'active':'',(currentStep>1)?'completed':'']}}"><view class="step-number">1</view><text class="step-text">基本信息</text></view><view class="step-line"></view><view class="{{['step-item',(currentStep>=2)?'active':'',(currentStep>2)?'completed':'']}}"><view class="step-number">2</view><text class="step-text">上传房产证</text></view><view class="step-line"></view><view class="{{['step-item',(currentStep>=3)?'active':'',(currentStep>3)?'completed':'']}}"><view class="step-number">3</view><text class="step-text">身份验证</text></view></view><block wx:if="{{currentStep===1}}"><view class="form-section"><view class="form-item"><text class="label">小区名称</text><input class="input" placeholder="请输入小区名称" data-event-opts="{{[['input',[['__set_model',['$0','communityName','$event',[]],['formData']]]]]}}" value="{{formData.communityName}}" bindinput="__e"/></view><view class="form-item"><text class="label">楼栋号</text><input class="input" placeholder="请输入楼栋号" data-event-opts="{{[['input',[['__set_model',['$0','buildingNumber','$event',[]],['formData']]]]]}}" value="{{formData.buildingNumber}}" bindinput="__e"/></view><view class="form-item"><text class="label">单元号</text><input class="input" placeholder="请输入单元号" data-event-opts="{{[['input',[['__set_model',['$0','unitNumber','$event',[]],['formData']]]]]}}" value="{{formData.unitNumber}}" bindinput="__e"/></view><view class="form-item"><text class="label">房号</text><input class="input" placeholder="请输入房号" data-event-opts="{{[['input',[['__set_model',['$0','roomNumber','$event',[]],['formData']]]]]}}" value="{{formData.roomNumber}}" bindinput="__e"/></view><button data-event-opts="{{[['tap',[['nextStep',['$event']]]]]}}" class="next-btn" bindtap="__e">下一步</button></view></block><block wx:if="{{currentStep===2}}"><view class="upload-section"><view class="upload-title"><text>上传房产证照片</text><text class="upload-tips">请上传清晰的房产证照片，确保信息完整可见</text></view><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="upload-area" bindtap="__e"><block wx:if="{{formData.propertyImage}}"><image class="preview-image" src="{{formData.propertyImage}}" mode="aspectFit"></image></block><block wx:else><view class="upload-placeholder"><text class="upload-icon">📷</text><text class="upload-text">点击上传房产证</text></view></block></view><view class="upload-tips-detail"><text>• 请确保照片清晰完整</text><text>• 所有信息必须可识别</text><text>• 支持jpg、png格式</text><text>• 文件大小不超过5MB</text></view><view class="button-group"><button data-event-opts="{{[['tap',[['prevStep',['$event']]]]]}}" class="prev-btn" bindtap="__e">上一步</button><button data-event-opts="{{[['tap',[['nextStep',['$event']]]]]}}" class="next-btn" bindtap="__e">下一步</button></view></view></block><block wx:if="{{currentStep===3}}"><view class="verify-section"><view class="verify-info"><text class="verify-title">身份验证</text><text class="verify-desc">请确认您的身份信息，我们将进行核实</text></view><view class="info-card"><text class="card-title">房屋信息</text><view class="info-item"><text class="info-label">小区：</text><text class="info-value">{{formData.communityName}}</text></view><view class="info-item"><text class="info-label">地址：</text><text class="info-value">{{formData.buildingNumber+"-"+formData.unitNumber+"-"+formData.roomNumber}}</text></view><view class="info-item"><text class="info-label">房产证：</text><text class="info-value">{{formData.propertyImage?'已上传':'未上传'}}</text></view></view><view class="agreement"><checkbox-group data-event-opts="{{[['change',[['onAgreementChange',['$event']]]]]}}" bindchange="__e"><checkbox style="transform:scale(0.7);" value="agreed" color="#3b5598" checked="{{agreedToTerms}}"></checkbox><text class="agreement-text"> 我已阅读并同意《房屋绑定服务协议》和《隐私政策》 </text></checkbox-group></view><view class="button-group"><button data-event-opts="{{[['tap',[['prevStep',['$event']]]]]}}" class="prev-btn" bindtap="__e">上一步</button><button class="submit-btn" disabled="{{!canSubmit}}" data-event-opts="{{[['tap',[['submitBinding',['$event']]]]]}}" bindtap="__e">提交审核</button></view></view></block></view></view>