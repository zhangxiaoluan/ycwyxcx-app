<view class="family-members-page"><button data-event-opts="{{[['tap',[['addMember',['$event']]]]]}}" class="add-btn" bindtap="__e"><u-icon vue-id="11c9370b-1" name="plus" size="20" color="#fff" bind:__l="__l"></u-icon><text>æ·»åŠ æˆå‘˜</text></button><view class="content"><block wx:if="{{$root.g0>0}}"><view class="members-list"><block wx:for="{{$root.l1}}" wx:for-item="member" wx:for-index="index" wx:key="id"><view class="member-item"><view class="member-info"><view class="member-avatar"><image class="avatar" src="{{member.$orig.avatar}}" mode="aspectFill"></image></view><view class="member-details"><text class="member-name">{{member.$orig.name}}</text><text class="member-relation">{{member.$orig.relation}}</text><view class="member-permissions"><block wx:for="{{member.l0}}" wx:for-item="permission" wx:for-index="__i0__" wx:key="$orig"><text class="permission-tag">{{''+permission.m0+''}}</text></block></view></view></view><view class="member-actions"><button data-event-opts="{{[['tap',[['editMember',['$0'],[[['familyMembers','id',member.$orig.id]]]]]]]}}" class="action-btn edit" bindtap="__e"><u-icon vue-id="{{'11c9370b-2-'+index}}" name="edit-pen" size="16" color="#3b5598" bind:__l="__l"></u-icon></button><button data-event-opts="{{[['tap',[['deleteMember',[index]]]]]}}" class="action-btn delete" bindtap="__e"><u-icon vue-id="{{'11c9370b-3-'+index}}" name="trash" size="16" color="#f5222d" bind:__l="__l"></u-icon></button></view></view></block></view></block><block wx:else><view class="empty-state"><view class="empty-icon">ğŸ‘¨</view><text class="empty-text">æš‚æ— å®¶åº­æˆå‘˜</text><text class="empty-desc">æ·»åŠ å®¶åº­æˆå‘˜åå¯ä»¥è®¾ç½®ä¸åŒçš„è®¿é—®æƒé™</text><button data-event-opts="{{[['tap',[['addMember',['$event']]]]]}}" class="empty-add-btn" bindtap="__e"><u-icon vue-id="11c9370b-4" name="plus" size="20" color="#3b5598" bind:__l="__l"></u-icon><text>æ·»åŠ ç¬¬ä¸€ä¸ªæˆå‘˜</text></button></view></block></view><u-modal vue-id="11c9370b-5" show="{{showMemberModal}}" title="{{isEditing?'ç¼–è¾‘æˆå‘˜':'æ·»åŠ æˆå‘˜'}}" data-event-opts="{{[['^confirm',[['saveMember']]],['^cancel',[['cancelMember']]]]}}" bind:confirm="__e" bind:cancel="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="modal-form"><view class="form-item"><text class="form-label">å§“å</text><input class="form-input" placeholder="è¯·è¾“å…¥æˆå‘˜å§“å" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['memberForm']]]]]}}" value="{{memberForm.name}}" bindinput="__e"/></view><view class="form-item"><text class="form-label">å…³ç³»</text><picker range="{{relationOptions}}" range-key="value" data-event-opts="{{[['change',[['onRelationChange',['$event']]]]]}}" bindchange="__e"><view class="picker">{{''+(memberForm.relation||'è¯·é€‰æ‹©å…³ç³»')+''}}</view></picker></view><view class="form-item"><text class="form-label">æ‰‹æœºå·</text><input class="form-input" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" type="number" data-event-opts="{{[['input',[['__set_model',['$0','phone','$event',[]],['memberForm']]]]]}}" value="{{memberForm.phone}}" bindinput="__e"/></view><view class="form-item"><text class="form-label">å¤´åƒ</text><view data-event-opts="{{[['tap',[['chooseAvatar',['$event']]]]]}}" class="avatar-upload" bindtap="__e"><block wx:if="{{memberForm.avatar}}"><image class="avatar-preview" src="{{memberForm.avatar}}" mode="aspectFill"></image></block><block wx:else><view class="avatar-placeholder"><u-icon vue-id="{{('11c9370b-6')+','+('11c9370b-5')}}" name="camera" size="30" color="#999" bind:__l="__l"></u-icon></view></block></view></view><view class="form-item"><text class="form-label">æƒé™è®¾ç½®</text><view class="permissions-group"><checkbox-group data-event-opts="{{[['change',[['onPermissionsChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{$root.l2}}" wx:for-item="permission" wx:for-index="__i1__" wx:key="value"><label class="permission-item"><checkbox value="{{permission.$orig.value}}" checked="{{permission.g1}}"></checkbox><text>{{permission.$orig.label}}</text></label></block></checkbox-group></view></view></view></u-modal></view>